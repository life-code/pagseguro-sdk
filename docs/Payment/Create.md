# Pagseguro SDK Documentation

## Create Payment documentation
> Whenever you use PagSeguro checkout, you must create a session. [Click here to learn more](https://github.com/life-code/pagseguro-sdk/blob/master/docs/Session.md).

```sh
<?php

require('./vendor/autoload.php');

use PagSeguro\PagSeguro;

// Create instance of PagSeguro\Payment\Payment::class
$payment = PagSeguro::payment();

$payment->setNotificationURL('http://example.com/notification');
$payment->setReceiveEmail('your_pagseguro_email@example.com');
$payment->setReference('9uggPD8p');


// Exchange items in payment
$item = new \PagSeguro\Items\Item();
$item->setId('737');
$item->setDescription('Lorem ipsum dolor sit amet, consectetur adipiscing elit');
$item->setAmount('100.00');
$item->setQuantity(1);
$payment->setItems($item);

$item = new \PagSeguro\Items\Item();
$item->setId('573');
$item->setDescription('Lorem ipsum dolor sit amet, consectetur adipiscing elit');
$item->setAmount('150.00');
$item->setQuantity(2);
$payment->setItems($item);


// Create customer instance for payment
$customer   = new \PagSeguro\Customer\Customer();
$documents  = new \PagSeguro\Customer\Documents();
$phone      = new \PagSeguro\Customer\Phone();
$address    = new \PagSeguro\Customer\Address();

try {
    $customer->setName('John Mark');
    $customer->setEmail('jonh.mark@example.com');
    $customer->setHash('da39a3ee5e6b4b0d3255bfef95601890afd80709');
    
    $documents->setItem(\PagSeguro\Contracts\Documents::CPF, '591.391.503-80');
    $customer->setDocuments($documents);
    
    $phone->setAreaCode('92');
    $phone->setNumber('39545410');
    $customer->setPhone($phone);
} catch (\PagSeguro\Exceptions\PagseguroException $e) {
    var_dump($e);
    die();
}

// Create method instance for payment
$method      = new \PagSeguro\Payment\Method();
$holder      = new \PagSeguro\Payment\CreditCard\Holder();
$credit_card = new \PagSeguro\Payment\CreditCard\CreditCard();
$documents   = new \PagSeguro\Payment\CreditCard\Documents();
$address     = new \PagSeguro\Payment\CreditCard\Address();
$phone       = new \PagSeguro\Payment\CreditCard\Phone();
$installment = new \PagSeguro\Payment\CreditCard\Installment();

try {
    $holder->setName('Credit Card Client Name');
    $holder->setBirthDate('12/01/1995');
    
    $documents->setItem(\PagSeguro\Contracts\Documents::CPF, '591.391.503-80'));
    $holder->setDocuments($documents);
    
    $phone->setAreaCode('34');
    $phone->setNumber('28314557');
    $holder->setPhone($phone);
    
    $installment->setQuantity(6);
    $installment->setNoInterestInstallmentQuantity(3);
    $installment->setValue(38.90);
    
    $address->setCountry('BRA');
    $address->setState('SP');
    $address->setCity('Embu das Artes');
    $address->setCep('06814180');
    $address->setDistrict('Jardim dos Moraes');
    $address->setStreet('Rua Chile');
    $address->setNumber('387');
    $address->setComplement(''); // optional
    
    $credit_card->setToken('6541321458649654213'); // Token generated by PagSeguro JavaScript API
    $credit_card->setHolder($holder);
    $credit_card->setInstallment($installment);
    $credit_card->setAddress($address);
    
    $method->setType(\PagSeguro\Payment\Type::CREDITCARD);
    $method->setCreditCard($credit_card);
    
} catch (\PagSeguro\Exceptions\PagseguroException $e) {
    var_dump($e);
    die();
}

// Create shipping instance for payment
$shipping = new \PagSeguro\Shipping\Shipping();

$response = $payment->pay($shipping, $customer, $method);

if ($response->hasErrors()) {
    var_dump($response->getErrors()->all());
    die();
}

var_dump($response);
die();

```