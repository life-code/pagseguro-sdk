# Pagseguro SDK Documentation

[Return documentation](https://github.com/life-code/pagseguro-sdk/blob/master/docs/README.md)

## Create Signature documentation
> Whenever you use PagSeguro checkout, you must create a session. [Click here to learn more](https://github.com/life-code/pagseguro-sdk/blob/master/docs/Session.md).

```sh
<?php

require('./vendor/autoload.php');

use PagSeguro\PagSeguro;

// Create instance of PagSeguro\PreApprovals\PreApproval::class
$pre_approval = PagSeguro::preApproval();

$pre_approval->setPlan('2321354615346354');
$pre_approval->setReference('54a6sg54a6ds5f1g3a5sdfg4');


// Create customer instance for payment
$customer   = new \PagSeguro\Customer\Customer();
$documents  = new \PagSeguro\Common\Documents();
$phone      = new \PagSeguro\Common\Phone();
$address    = new \PagSeguro\Common\Address();

try {
    $customer->setName('John Mark');
    $customer->setEmail('jonh.mark@example.com');
    $customer->setHash('da39a3ee5e6b4b0d3255bfef95601890afd80709');
    
    $documents->setItem(\PagSeguro\Contracts\Common\Documents::CPF, '591.391.503-80');
    $customer->setDocuments($documents);
    
    $phone->setAreaCode('92');
    $phone->setNumber('39545410');
    $customer->setPhone($phone);
    
    $address->setCountry('BRA');
    $address->setState('SP');
    $address->setCity('Embu das Artes');
    $address->setCep('06814180');
    $address->setDistrict('Jardim dos Moraes');
    $address->setStreet('Rua Chile');
    $address->setNumber('387');
    $address->setComplement(''); // optional
    $customer->setAddress($address);
} catch (\PagSeguro\Exceptions\PagseguroException $e) {
    var_dump($e);
    die();
}

// Create method instance for payment
$method      = new \PagSeguro\Payment\Method();
$holder      = new \PagSeguro\Payment\CreditCard\Holder();
$credit_card = new \PagSeguro\Payment\CreditCard\CreditCard();
$documents   = new \PagSeguro\Common\Documents();
$phone       = new \PagSeguro\Common\Phone();

try {
    $holder->setName('Credit Card Client Name');
    $holder->setBirthDate('12/01/1995');
    
    $documents->setItem(\PagSeguro\Contracts\Common\Documents::CPF, '591.391.503-80'));
    $holder->setDocuments($documents);
    
    $phone->setAreaCode('34');
    $phone->setNumber('28314557');
    $holder->setPhone($phone);
    
    $credit_card->setToken('6541321458649654213'); // Token generated by PagSeguro JavaScript API
    $credit_card->setHolder($holder);
    
    $method->setType(\PagSeguro\Payment\Type::CREDITCARD);
    $method->setCreditCard($credit_card);
    
} catch (\PagSeguro\Exceptions\PagseguroException $e) {
    var_dump($e);
    die();
}

$response = $pre_approval->approve($customer, $method);

if ($response->hasErrors()) {
    var_dump($response->getErrors()->all());
    die();
}

var_dump($response);
die();

```